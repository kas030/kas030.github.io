<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Codeforces 2120C Divine Tree</title>
    <url>/2025/08/09/Codeforces-2120C-Divine-Tree/</url>
    <content><![CDATA[<h1 id="题目"><a class="markdownIt-Anchor" href="#题目"></a> 题目</h1>
<p><strong>原题链接</strong>  <a href="https://codeforces.com/contest/2120/problem/C">2120C Divine Tree</a></p>
<p>对于一个有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 个结点，编号分别从 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 的有根树，设某个结点为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>，定义 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d(v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span> 为从根到此结点路径上所有结点编号的最小值。</p>
<p>给定两个正整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo separator="true">,</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">n, m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">m</span></span></span></span>，请构造出一个有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 个结点，编号分别从 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 的有根树，使得 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>d</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo>=</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">\sum_{i=1}^n d(i) = m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.104002em;vertical-align:-0.29971000000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span>。如果不存在这样的树，输出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>。</p>
<span id="more"></span>
<h1 id="输入"><a class="markdownIt-Anchor" href="#输入"></a> 输入</h1>
<p>第一行为一个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mtext> </mtext><mo stretchy="false">(</mo><mn>1</mn><mo>≤</mo><mi>t</mi><mo>≤</mo><mn>1</mn><msup><mn>0</mn><mn>4</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">t\ (1 \le t \le 10^4)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">t</span><span class="mspace"> </span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，表示数据的组数。</p>
<p>每组数据为一行两个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mtext> </mtext><mo stretchy="false">(</mo><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup><mo separator="true">,</mo><mn>1</mn><mo>≤</mo><mi>m</mi><mo>≤</mo><mn>1</mn><msup><mn>0</mn><mn>12</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">m \ (1 \le n \le 10^6, 1 \le m \le 10^{12})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mspace"> </span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>。</p>
<p>保证所有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 之和不超过 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup></mrow><annotation encoding="application/x-tex">10^6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span>。</p>
<h1 id="输出"><a class="markdownIt-Anchor" href="#输出"></a> 输出</h1>
<p>对于每组数据，第一行输出一个整数，表示树根。</p>
<p>接下来输出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 行，每行为两个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo separator="true">,</mo><mi>v</mi></mrow><annotation encoding="application/x-tex">u,v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>，代表一条连接顶点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo separator="true">,</mo><mi>v</mi></mrow><annotation encoding="application/x-tex">u,v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> 的边。</p>
<p>边和顶点可以以任何顺序输出。如果有多种可能的解，输出任意一种。</p>
<p>如果不存在解，输出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>。</p>
<h1 id="样例"><a class="markdownIt-Anchor" href="#样例"></a> 样例</h1>
<p>输入 #1</p>
<div class="rbcode">
<pre><code class="highlight text">2
1 2
4 6</code></pre>
</div>
<p>输出 #1</p>
<div class="rbcode">
<pre><code class="highlight text">-1
3
3 1
1 2
2 4</code></pre>
</div>
<h1 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h1>
<p>当 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> 差距过大时，显然是无解的。具体范围是多少呢？有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 个结点时，要使 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∑</mo><mi>d</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sum d(i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span></span></span></span> 最小，可以将 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 作为根结点，这样所有结点的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span></span></span></span> 值都是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> 下确界为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>；要使 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∑</mo><mi>d</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sum d(i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span></span></span></span> 最大，可以将 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 作为根结点，每个结点的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span></span></span></span> 值等于本身，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> 上确界为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle displaystyle="true" scriptlevel="0"><mfrac><mrow><mi>n</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mstyle></mrow><annotation encoding="application/x-tex">\dfrac{n(n+1)}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>。</p>
<p>先将 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 作为树根，考虑调整一些结点让 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span></span></span></span> 值总和变大，以调整至 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span>。若将结点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> 连接至 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 的上方，成为新的树根，则 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span></span></span></span> 值总和变大 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">v-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>，其他结点 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span></span></span></span> 值不变。对于小于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> 的结点，都可以直接连在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 的上方，而影响其他点的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span></span></span></span> 值。</p>
<p>因此从大的结点开始向前调整。每个结点只要调整后总 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span></span></span></span> 值没有超过目标，就一定要调整，因为利用前面的结点达到相同的效果不会更优。这样的调整策略容易发现一定有解。</p>
<h1 id="代码实现"><a class="markdownIt-Anchor" href="#代码实现"></a> 代码实现</h1>
<p>先判断 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> 的范围，排除无解的情况。</p>
<p>最初总 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span></span></span></span> 值为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>，减掉后从后往前标记需要调整的结点。同时找出树根（因为树根要第一个输出）。</p>
<div class="rbcode">
<pre><code class="highlight cpp">m -= n;
<span class="type">int</span> root = <span class="number">1</span>;
<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v</span><span class="params">(n + <span class="number">1</span>)</span></span>;
<span class="keyword">for</span> (<span class="type">int</span> i = n; m &amp;&amp; i &gt; <span class="number">1</span>; i--) &#123;
    <span class="comment">// 能调整就调整</span>
    <span class="keyword">if</span> (i - <span class="number">1</span> &lt;= m) &#123;
        m -= i - <span class="number">1</span>;
        v[i] = <span class="number">1</span>;
        <span class="keyword">if</span> (root == <span class="number">1</span>) root = i;
    &#125;
&#125;</code></pre>
</div>
<p>确定了哪些点被调整到了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 的上方后，输出所有边即可。</p>
<details class="mkmt mt-code">
<summary>完整代码</summary>
<pre><code class="highlight cpp"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span>
<span class="keyword">using</span> <span class="keyword">namespace</span> std;
<span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">(<span class="type">int</span> n, <span class="type">long</span> <span class="type">long</span> m)</span> </span>&#123;
    <span class="type">long</span> <span class="type">long</span> l = n, r = <span class="number">1LL</span> * n * (n + <span class="number">1</span>) / <span class="number">2</span>;
    <span class="keyword">if</span> (m &lt; l || m &gt; r) &#123;
        cout &lt;&lt; <span class="string">&quot;-1\n&quot;</span>;
        <span class="keyword">return</span>;
    &#125;
    m -= n;
    <span class="type">int</span> root = <span class="number">1</span>;
    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v</span><span class="params">(n + <span class="number">1</span>)</span></span>;
    <span class="keyword">for</span> (<span class="type">int</span> i = n; m &amp;&amp; i &gt; <span class="number">1</span>; i--) &#123;
        <span class="keyword">if</span> (i - <span class="number">1</span> &lt;= m) &#123;
            m -= i - <span class="number">1</span>;
            v[i] = <span class="number">1</span>;
            <span class="keyword">if</span> (root == <span class="number">1</span>) root = i;
        &#125;
    &#125;
    cout &lt;&lt; root &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;
    <span class="type">int</span> last = root;
    v[<span class="number">1</span>] = <span class="number">1</span>;
    <span class="keyword">for</span> (<span class="type">int</span> i = n; i &gt;= <span class="number">1</span>; i--) &#123;
        <span class="keyword">if</span> (!v[i]) &#123;
            cout &lt;&lt; i &lt;&lt; <span class="string">&quot; 1\n&quot;</span>;
        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i != root) &#123;
            cout &lt;&lt; i &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; last &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;
            last = i;
        &#125;
    &#125;
&#125;
<span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;
    cin.<span class="built_in">tie</span>(<span class="number">0</span>)-&gt;<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);
    <span class="type">int</span> t;
    cin &gt;&gt; t;
    <span class="keyword">while</span> (t--) &#123;
        <span class="type">int</span> n;
        <span class="type">long</span> <span class="type">long</span> m;
        cin &gt;&gt; n &gt;&gt; m;
        <span class="built_in">solve</span>(n, m);
    &#125;
    <span class="keyword">return</span> <span class="number">0</span>;
&#125;</code></pre>
</details>]]></content>
      <categories>
        <category>算法竞赛</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>C++</tag>
        <tag>Codeforces</tag>
        <tag>树</tag>
        <tag>构造</tag>
        <tag>贪心</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo 模仿 OI Wiki 折叠标签样式</title>
    <url>/2025/08/09/Hexo-%E6%A8%A1%E4%BB%BF-OI-Wiki-%E6%8A%98%E5%8F%A0%E6%A0%87%E7%AD%BE%E6%A0%B7%E5%BC%8F/</url>
    <content><![CDATA[<p>在 Hexo 上写文章时常常发现代码太长想要折叠，但 NexT 主题自带的折叠功能感觉太丑。</p>
<p>一番搜索后发现<a href="https://www.cnblogs.com/TH911/p/18994526">一篇文章</a>复现了 Oi Wiki 的折叠样式，结果又发现 Oi Wiki 的 css 太长不想看，<br />
于是决定自己实现类似的样式。</p>
<span id="more"></span>
<details class="mkmt mt-warning" open>
<summary>注意</summary>
<div>
以下内容只适用于 Hexo NexT 8.0。
</div>
</details>
<p>NexT 8.0 支持将自定义样式放在独立的文件中。</p>
<p>找到 NexT <strong>主题配置文件</strong> <code>_config.yml</code>，找到以下内容：</p>
<div class="rbcode">
<pre><code class="highlight yml"><span class="comment"># Define custom file paths.</span>
<span class="comment"># Create your custom files in site directory `source/_data` and uncomment needed files below.</span>
<span class="attr">custom_file_path:</span>
  <span class="comment">#head: source/_data/head.njk</span>
  <span class="comment">#header: source/_data/header.njk</span>
  <span class="comment">#sidebar: source/_data/sidebar.njk</span>
  <span class="comment">#postMeta: source/_data/post-meta.njk</span>
  <span class="comment">#postBodyStart: source/_data/post-body-start.njk</span>
  <span class="comment">#postBodyEnd: source/_data/post-body-end.njk</span>
  <span class="comment">#footer: source/_data/footer.njk</span>
  <span class="comment">#bodyEnd: source/_data/body-end.njk</span>
  <span class="comment">#variable: source/_data/variables.styl</span>
  <span class="comment">#mixin: source/_data/mixins.styl</span>
  <span class="attr">style:</span> <span class="string">source/_data/styles.styl</span></code></pre>
</div>
<p>将其中 <code>style</code> 前面的注释符号删掉，如上面所示。</p>
<p>在<strong>站点文件夹</strong>下创建文件 <code>source/_data/styles.styl</code>，在其中添加如下内容：</p>
<details class="mkmt mt-code">
<summary>source/_data/styles.styl</summary>
<div>
<pre><code class="highlight yml"><span class="string">details.mkmt</span>
  <span class="string">border</span> <span class="string">1px</span> <span class="string">solid</span> <span class="comment">#ddd</span>
  <span class="string">border-radius</span> <span class="string">6px</span>
  <span class="string">margin</span> <span class="string">1em</span> <span class="number">0</span>
  <span class="string">background</span> <span class="comment">#fff</span>
  <span class="string">overflow</span> <span class="string">hidden</span>
  <span class="string">transition</span> <span class="string">all</span> <span class="number">0.</span><span class="string">2s</span> <span class="string">ease</span>

<span class="string">details.mkmt</span> <span class="string">&gt;</span> <span class="string">summary</span>
  <span class="string">display</span> <span class="string">flex</span>
  <span class="string">align-items</span> <span class="string">center</span>
  <span class="string">gap</span> <span class="number">0.</span><span class="string">5em</span>
  <span class="string">padding</span> <span class="number">0.</span><span class="string">6em</span> <span class="string">1em</span>
  <span class="string">font-weight</span> <span class="number">600</span>
  <span class="string">cursor</span> <span class="string">pointer</span>
  <span class="string">list-style</span> <span class="string">none</span>
  <span class="string">position</span> <span class="string">relative</span>
  <span class="string">color</span> <span class="string">inherit</span>

<span class="string">details.mkmt</span> <span class="string">&gt;</span> <span class="string">summary::after</span>
  <span class="string">content</span> <span class="string">&quot;&gt;&quot;</span>
  <span class="string">position</span> <span class="string">absolute</span>
  <span class="string">right</span> <span class="string">1em</span>
  <span class="string">transition</span> <span class="string">transform</span> <span class="number">0.</span><span class="string">2s</span> <span class="string">ease</span>

<span class="string">details.mkmt[open]</span> <span class="string">&gt;</span> <span class="string">summary::after</span>
  <span class="string">transform</span> <span class="string">rotate(90deg)</span>

<span class="string">details.mkmt</span> <span class="string">&gt;</span> <span class="string">*:not(summary)</span>
  <span class="string">margin</span> <span class="number">0</span>
  <span class="string">padding</span> <span class="number">0.</span><span class="string">6em</span> <span class="number">0.</span><span class="string">8em</span>

<span class="string">details.mkmt</span> <span class="string">&gt;</span> <span class="string">summary::before</span>
  <span class="string">content</span> <span class="string">&#x27;&#x27;</span>
  <span class="string">display</span> <span class="string">inline-block</span>
  <span class="string">width</span> <span class="number">1.</span><span class="string">2em</span>
  <span class="string">height</span> <span class="number">1.</span><span class="string">2em</span>
  <span class="string">margin-right</span> <span class="number">0.</span><span class="string">4em</span>
  <span class="string">background-repeat</span> <span class="literal">no</span><span class="string">-repeat</span>
  <span class="string">background-position</span> <span class="string">center</span>
  <span class="string">background-size</span> <span class="string">contain</span>

<span class="string">details.mkmt.mt-note</span> <span class="string">&gt;</span> <span class="string">summary::before</span>
  <span class="string">background-image</span> <span class="string">url(&quot;data:image/svg+xml;utf8,&lt;svg</span> <span class="string">xmlns=&#x27;http://www.w3.org/2000/svg&#x27;</span> <span class="string">fill=&#x27;none&#x27;</span> <span class="string">stroke=&#x27;%23588bff&#x27;</span> <span class="string">stroke-width=&#x27;2&#x27;</span> <span class="string">stroke-linecap=&#x27;round&#x27;</span> <span class="string">stroke-linejoin=&#x27;round&#x27;</span> <span class="string">viewBox=&#x27;0</span> <span class="number">0</span> <span class="number">24</span> <span class="number">24</span><span class="string">&#x27;&gt;&lt;circle cx=&#x27;</span><span class="number">12</span><span class="string">&#x27; cy=&#x27;</span><span class="number">12</span><span class="string">&#x27; r=&#x27;</span><span class="number">10</span><span class="string">&#x27;/&gt;&lt;line x1=&#x27;</span><span class="number">12</span><span class="string">&#x27; y1=&#x27;</span><span class="number">8</span><span class="string">&#x27; x2=&#x27;</span><span class="number">12</span><span class="string">&#x27; y2=&#x27;</span><span class="number">8</span><span class="string">&#x27;/&gt;&lt;line x1=&#x27;</span><span class="number">12</span><span class="string">&#x27; y1=&#x27;</span><span class="number">12</span><span class="string">&#x27; x2=&#x27;</span><span class="number">12</span><span class="string">&#x27; y2=&#x27;</span><span class="number">16</span><span class="string">&#x27;/&gt;&lt;/svg&gt;&quot;)</span>
<span class="string">details.mkmt.mt-note</span>
<span class="string">  border 1.5px solid #588bff</span>
<span class="string">  background #fff</span>
<span class="string">details.mkmt.mt-note &gt; summary</span>
<span class="string">  background #eef3ff</span>
<span class="string">  color #588bff</span>
<span class="string"></span>
<span class="string">details.mkmt.mt-warning &gt; summary::before</span>
<span class="string">  background-image url(&quot;data:image/svg+xml;utf8,&lt;svg xmlns=&#x27;</span><span class="string">http://www.w3.org/2000/svg&#x27;</span> <span class="string">fill=&#x27;none&#x27;</span> <span class="string">stroke=&#x27;%23f69202&#x27;</span> <span class="string">stroke-width=&#x27;2&#x27;</span> <span class="string">stroke-linecap=&#x27;round&#x27;</span> <span class="string">stroke-linejoin=&#x27;round&#x27;</span> <span class="string">viewBox=&#x27;0</span> <span class="number">0</span> <span class="number">24</span> <span class="number">24</span><span class="string">&#x27;&gt;&lt;path d=&#x27;</span><span class="string">M10.29</span> <span class="number">3.</span><span class="string">86L1.82</span> <span class="string">18a2</span> <span class="number">2</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1.71</span> <span class="string">3h16.94a2</span> <span class="number">2</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1.71</span><span class="string">-3L13.71</span> <span class="number">3.</span><span class="string">86a2</span> <span class="number">2</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span><span class="number">-3.42</span> <span class="string">0z&#x27;/&gt;&lt;line</span> <span class="string">x1=&#x27;12&#x27;</span> <span class="string">y1=&#x27;9&#x27;</span> <span class="string">x2=&#x27;12&#x27;</span> <span class="string">y2=&#x27;13&#x27;/&gt;&lt;line</span> <span class="string">x1=&#x27;12&#x27;</span> <span class="string">y1=&#x27;17&#x27;</span> <span class="string">x2=&#x27;12.01&#x27;</span> <span class="string">y2=&#x27;17&#x27;/&gt;&lt;/svg&gt;&quot;)</span>
<span class="string">details.mkmt.mt-warning</span>
  <span class="string">border</span> <span class="number">1.</span><span class="string">5px</span> <span class="string">solid</span> <span class="comment">#f69202</span>
  <span class="string">background</span> <span class="comment">#fff</span>
<span class="string">details.mkmt.mt-warning</span> <span class="string">&gt;</span> <span class="string">summary</span>
  <span class="string">background</span> <span class="comment">#fef4e5</span>
  <span class="string">color</span> <span class="comment">#f69202</span>

<span class="string">details.mkmt.mt-danger</span> <span class="string">&gt;</span> <span class="string">summary::before</span>
  <span class="string">background-image</span> <span class="string">url(&quot;data:image/svg+xml;utf8,&lt;svg</span> <span class="string">xmlns=&#x27;http://www.w3.org/2000/svg&#x27;</span> <span class="string">fill=&#x27;none&#x27;</span> <span class="string">stroke=&#x27;%23f45555&#x27;</span> <span class="string">stroke-width=&#x27;2&#x27;</span> <span class="string">stroke-linecap=&#x27;round&#x27;</span> <span class="string">stroke-linejoin=&#x27;round&#x27;</span> <span class="string">viewBox=&#x27;0</span> <span class="number">0</span> <span class="number">24</span> <span class="number">24</span><span class="string">&#x27;&gt;&lt;circle cx=&#x27;</span><span class="number">12</span><span class="string">&#x27; cy=&#x27;</span><span class="number">12</span><span class="string">&#x27; r=&#x27;</span><span class="number">10</span><span class="string">&#x27;/&gt;&lt;line x1=&#x27;</span><span class="number">12</span><span class="string">&#x27; y1=&#x27;</span><span class="number">8</span><span class="string">&#x27; x2=&#x27;</span><span class="number">12</span><span class="string">&#x27; y2=&#x27;</span><span class="number">12</span><span class="string">&#x27;/&gt;&lt;line x1=&#x27;</span><span class="number">12</span><span class="string">&#x27; y1=&#x27;</span><span class="number">16</span><span class="string">&#x27; x2=&#x27;</span><span class="number">12.01</span><span class="string">&#x27; y2=&#x27;</span><span class="number">16</span><span class="string">&#x27;/&gt;&lt;/svg&gt;&quot;)</span>
<span class="string">details.mkmt.mt-danger</span>
<span class="string">  border 1.5px solid #f45555</span>
<span class="string">  background #fff</span>
<span class="string">details.mkmt.mt-danger &gt; summary</span>
<span class="string">  background #feeeee</span>
<span class="string">  color #f45555</span>
<span class="string"></span>
<span class="string">pre</span>
<span class="string">  margin 0</span>
<span class="string"></span>
<span class="string">details.mkmt.mt-code &gt; summary::before</span>
<span class="string">  background-image url(&quot;data:image/svg+xml;utf8,&lt;svg xmlns=&#x27;</span><span class="string">http://www.w3.org/2000/svg&#x27;</span> <span class="string">fill=&#x27;none&#x27;</span> <span class="string">stroke=&#x27;%237f50ff&#x27;</span> <span class="string">stroke-width=&#x27;2&#x27;</span> <span class="string">stroke-linecap=&#x27;round&#x27;</span> <span class="string">stroke-linejoin=&#x27;round&#x27;</span> <span class="string">viewBox=&#x27;0</span> <span class="number">0</span> <span class="number">24</span> <span class="number">24</span><span class="string">&#x27;&gt;&lt;path d=&#x27;</span><span class="string">M7</span> <span class="string">8L3</span> <span class="string">12L7</span> <span class="number">16</span><span class="string">&#x27;/&gt; &lt;path d=&#x27;</span><span class="string">M17</span> <span class="string">16L21</span> <span class="string">12L17</span> <span class="number">8</span><span class="string">&#x27;/&gt; &lt;path d=&#x27;</span><span class="string">M9</span> <span class="number">19.</span><span class="string">5L14.5</span> <span class="number">5</span><span class="string">&#x27;/&gt;&lt;/svg&gt;&quot;)</span>
<span class="string">details.mkmt.mt-code</span>
<span class="string">  border 1.5px solid #7f50ff</span>
<span class="string">  background #fff</span>
<span class="string">details.mkmt.mt-code &gt; summary</span>
<span class="string">  background #f2edff</span>
<span class="string">  color #7f50ff</span></code></pre>
</div>
</details>
<p>使用示例：</p>
<div class="rbcode">
<pre><code class="highlight markdown"><span class="language-xml"><span class="tag">&lt;<span class="name">details</span> <span class="attr">class</span>=<span class="string">&quot;mkmt mt-note&quot;</span> <span class="attr">open</span>&gt;</span></span>
<span class="language-xml"><span class="tag">&lt;<span class="name">summary</span>&gt;</span></span>提示<span class="language-xml"><span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span>

这是提示类型的折叠框内容。

<span class="language-xml"><span class="tag">&lt;/<span class="name">details</span>&gt;</span></span>

<span class="language-xml"><span class="tag">&lt;<span class="name">details</span> <span class="attr">class</span>=<span class="string">&quot;mkmt mt-warning&quot;</span> <span class="attr">open</span>&gt;</span></span>
<span class="language-xml"><span class="tag">&lt;<span class="name">summary</span>&gt;</span></span>警告<span class="language-xml"><span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span>

这是警告类型的折叠框内容。

<span class="language-xml"><span class="tag">&lt;/<span class="name">details</span>&gt;</span></span>

<span class="language-xml"><span class="tag">&lt;<span class="name">details</span> <span class="attr">class</span>=<span class="string">&quot;mkmt mt-danger&quot;</span> <span class="attr">open</span>&gt;</span></span>
<span class="language-xml"><span class="tag">&lt;<span class="name">summary</span>&gt;</span></span>危险<span class="language-xml"><span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span>

这是危险类型的折叠框内容。

<span class="language-xml"><span class="tag">&lt;/<span class="name">details</span>&gt;</span></span>


<span class="language-xml"><span class="tag">&lt;<span class="name">details</span> <span class="attr">class</span>=<span class="string">&quot;mkmt mt-code&quot;</span> <span class="attr">open</span>&gt;</span></span>
<span class="language-xml"><span class="tag">&lt;<span class="name">summary</span>&gt;</span></span>代码<span class="language-xml"><span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span>

<span class="code">```text</span>
<span class="code">This is a sample snippet of code.</span>
<span class="code">```</span>

<span class="language-xml"><span class="tag">&lt;/<span class="name">details</span>&gt;</span></span></code></pre>
</div>
<p>效果如下：</p>
<details class="mkmt mt-note" open>
<summary>提示</summary>
<p>这是提示类型的折叠框内容。</p>
</details>
<details class="mkmt mt-warning" open>
<summary>警告</summary>
<p>这是警告类型的折叠框内容。</p>
</details>
<details class="mkmt mt-danger" open>
<summary>危险</summary>
<p>这是危险类型的折叠框内容。</p>
</details>
<details class="mkmt mt-code" open>
<summary>代码</summary>
<pre><code class="highlight text">This is a sample snippet of code.</code></pre>
</details>]]></content>
      <categories>
        <category>Hexo 博客搭建</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Stylus</tag>
      </tags>
  </entry>
  <entry>
    <title>Codeforces 2074D Counting Points</title>
    <url>/2025/08/14/Codeforces-2074D-Counting-Points/</url>
    <content><![CDATA[<h1 id="题目"><a class="markdownIt-Anchor" href="#题目"></a> 题目</h1>
<p><strong>原题链接</strong>  <a href="https://codeforces.com/problemset/problem/2074/D">2074D Counting Points</a></p>
<p>在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mi>O</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">xOy</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">x</span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> 平面上，有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 个圆心位于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> 轴的圆，圆心坐标分别为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>x</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">x_1,x_2,\cdots,x_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，半径分别为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>r</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>r</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">r_1,r_2,\cdots,r_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，圆心坐标和半径均为整数。另外，所有半径的和为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span>，即 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msub><mi>r</mi><mi>i</mi></msub><mo>=</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">\sum_{i=1}^n r_i=m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.104002em;vertical-align:-0.29971000000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span>。求在圆内或圆上的整点个数。</p>
<span id="more"></span>
<h1 id="输入"><a class="markdownIt-Anchor" href="#输入"></a> 输入</h1>
<p>第一行为一个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mtext> </mtext><mo stretchy="false">(</mo><mn>1</mn><mo>≤</mo><mi>t</mi><mo>≤</mo><mn>1</mn><msup><mn>0</mn><mn>4</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">t\ (1 \le t \le 10^4)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">t</span><span class="mspace"> </span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，表示数据的组数。</p>
<p>对于每组数据，第一行为两个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mtext> </mtext><mo stretchy="false">(</mo><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mi>m</mi><mo>≤</mo><mn>2</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>5</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">m\ (1 \le n \le m \le 2 \cdot 10^5)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mspace"> </span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>。<br />
第二行为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 个整数，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>x</mi><mi>n</mi></msub><mtext> </mtext><mo stretchy="false">(</mo><mo>−</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mo>≤</mo><msub><mi>x</mi><mi>i</mi></msub><mo>≤</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x_1,x_2,\cdots,x_n \ (-10^9 \le x_i \le 10^9)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace"> </span><span class="mopen">(</span><span class="mord">−</span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7859700000000001em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> ——圆心的坐标。<br />
第三行为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 个整数，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>r</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>r</mi><mi>n</mi></msub><mtext> </mtext><mo stretchy="false">(</mo><msub><mi>r</mi><mi>i</mi></msub><mo>≥</mo><mn>1</mn><mo separator="true">,</mo><mtext> </mtext><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msub><mi>r</mi><mi>i</mi></msub><mo>=</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">r_1,r_2,\cdots,r_n \ (r_i \ge 1,\ \sum_{i=1}^n r_i=m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace"> </span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.104002em;vertical-align:-0.29971000000000003em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.804292em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span> ——圆的半径。</p>
<p>保证所有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> 之和不超过 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">2 \cdot 10^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span>。</p>
<h1 id="输出"><a class="markdownIt-Anchor" href="#输出"></a> 输出</h1>
<p>对于每组数据，输出满足条件的整数点的数量。</p>
<h1 id="样例"><a class="markdownIt-Anchor" href="#样例"></a> 样例</h1>
<p>输入 #1</p>
<div class="rbcode">
<pre><code class="highlight text">4
2 3
0 0
1 2
2 3
0 2
1 2
3 3
0 2 5
1 1 1
4 8
0 5 10 15
2 2 2 2</code></pre>
</div>
<p>输出 #1</p>
<div class="rbcode">
<pre><code class="highlight text">13
16
14
52</code></pre>
</div>
<h1 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h1>
<p>首先可以想到将所有点分为在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> 轴上的点和在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> 轴两侧的点来计算，其中在轴两侧的点只需计算一侧再乘 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span> 即可。</p>
<p>对于只有一个圆的情况，要计算某个 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> 坐标处被圆覆盖的整点个数，可以直接用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">⌊</mo><msqrt><mrow><msup><mi>r</mi><mn>2</mn></msup><mo>−</mo><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><mi>o</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></msqrt><mo stretchy="false">⌋</mo></mrow><annotation encoding="application/x-tex">\lfloor \sqrt{r^2-(x-o)^2} \rfloor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.30499999999999994em;"></span><span class="mopen">⌊</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.935em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathnormal">o</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-2.8950000000000005em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l0 -0
c4.7,-7.3,11,-11,19,-11
H40000v40H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.30499999999999994em;"><span></span></span></span></span></span><span class="mclose">⌋</span></span></span></span> 来计算，其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi></mrow><annotation encoding="application/x-tex">o</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">o</span></span></span></span> 分别为圆的半径和圆心坐标，如图：</p>
<img src="p1.png" alt="image" width=50%>
<p>由于圆之间会产生相互覆盖，因此计算一个 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> 坐标处的整点个数需要对所有圆都计算一遍，然后取最大值，时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>m</mi><mo>⋅</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(m \cdot n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>，显然会 T。</p>
<p>如果能将不会覆盖到此位置的圆排除，那么时间复杂度会下降到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span>，可以接受。</p>
<p>考虑将所有圆按照左端点排序，并用一个指针从左到右扫描（表示正在求整点个数的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> 坐标），用一个队列记录对当前坐标有影响的圆。每次指针右移时都让已经无影响的圆出队，这样可以保证每个圆占据的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> 坐标只被扫描一次。由于需要排序，时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n \log n + m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span>。</p>
<p>另外，如果被扫描到的圆的右端点坐标小于等于当前队尾圆的右端点坐标，则不需要入队，因为这个圆一定被队尾的圆包含，对答案没有贡献。</p>
<details class="mkmt mt-code">
<summary>完整代码</summary>
<pre><code class="highlight cpp"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span>
<span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span>
<span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ranges&gt;</span></span>
<span class="keyword">using</span> <span class="keyword">namespace</span> std;
<span class="keyword">struct</span> <span class="title class_">info</span> &#123;
    <span class="type">int</span> l, r, o;
    <span class="type">int</span> d;
    <span class="keyword">auto</span> <span class="built_in">operator</span>&lt;=&gt;(<span class="type">const</span> info &amp;rhs) <span class="type">const</span> &#123; <span class="keyword">return</span> l &lt;=&gt; rhs.l; &#125;
    <span class="keyword">auto</span> <span class="keyword">operator</span>==(<span class="type">const</span> info &amp;rhs) <span class="type">const</span> &#123; <span class="keyword">return</span> l == rhs.l; &#125;
&#125;;
<span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;
    <span class="type">int</span> n, m;
    cin &gt;&gt; n &gt;&gt; m;
    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">x</span><span class="params">(n)</span></span>;
    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;i : x) &#123;
        cin &gt;&gt; i;
    &#125;
    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">r</span><span class="params">(n)</span></span>;
    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;i : r) &#123;
        cin &gt;&gt; i;
    &#125;

    <span class="function">vector&lt;info&gt; <span class="title">v</span><span class="params">(n)</span></span>;
    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;
        v[i] = &#123;x[i] - r[i], x[i] + r[i], x[i], r[i]&#125;;
    &#125;
    ranges::<span class="built_in">sort</span>(v);

    <span class="type">long</span> <span class="type">long</span> L&#123;&#125;, side&#123;&#125;;
    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>, j = <span class="number">1</span>; i &lt; n; i = j) &#123;
        deque&lt;<span class="type">int</span>&gt; q;
        q.<span class="built_in">push_back</span>(i);
        <span class="type">int</span> k = v[i].l;
        <span class="keyword">while</span> (q.<span class="built_in">size</span>()) &#123;
            <span class="keyword">while</span> (j &lt; n &amp;&amp; v[j].l &lt;= k) &#123;
                <span class="keyword">if</span> (v[j].r &gt; v[q.<span class="built_in">back</span>()].r) q.<span class="built_in">push_back</span>(j);
                j++;
            &#125;

            <span class="type">int</span> maxh&#123;&#125;;
            <span class="keyword">for</span> (<span class="keyword">auto</span> id : q) &#123;
                <span class="type">long</span> <span class="type">long</span> d = <span class="built_in">abs</span>(k - v[id].o), D = v[id].d;
                maxh = <span class="built_in">max</span>(maxh, (<span class="type">int</span>)<span class="built_in">sqrt</span>(D * D - d * d));
            &#125;
            side += maxh;
            L++;

            k++;
            <span class="keyword">while</span> (q.<span class="built_in">size</span>() &amp;&amp; k &gt; v[q.<span class="built_in">front</span>()].r) &#123;
                q.<span class="built_in">pop_front</span>();
            &#125;
        &#125;
    &#125;
    cout &lt;&lt; L + side * <span class="number">2</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;
&#125;
<span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;
    cin.<span class="built_in">tie</span>(<span class="number">0</span>)-&gt;<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);
    <span class="type">int</span> t;
    cin &gt;&gt; t;
    <span class="keyword">while</span> (t--) &#123;
        <span class="built_in">solve</span>();
    &#125;
    <span class="keyword">return</span> <span class="number">0</span>;
&#125;</code></pre>
</details>
<h1 id="语法踩坑记录"><a class="markdownIt-Anchor" href="#语法踩坑记录"></a> 语法踩坑记录</h1>
<p>最开始写的结构体为：</p>
<div class="rbcode">
<pre><code class="highlight cpp"><span class="keyword">struct</span> <span class="title class_">info</span> &#123;
    <span class="type">int</span> l, r, o;
    <span class="type">int</span> d;
    <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> info &amp;rhs) <span class="type">const</span> &#123; <span class="keyword">return</span> l &lt; rhs.l; &#125;
&#125;;

<span class="function">vector&lt;info&gt; <span class="title">v</span><span class="params">(n)</span></span>;</code></pre>
</div>
<p>结果发现使用 <code>std::ranges::sort(v)</code> 报错。查了 cppreference 发现 <code>std::ranges::sort</code> 要求比 <code>std::sort</code> 更加严格。</p>
<p><code>std::ranges::sort</code> 要求迭代器满足 <code>std::sortable</code> 概念，尝试添加了代码：</p>
<div class="rbcode">
<pre><code class="highlight cpp"><span class="built_in">static_assert</span>(std::sortable&lt;std::vector&lt;info&gt;::iterator&gt;); <span class="comment">//失败</span></code></pre>
</div>
<p>发现确实发生了静态断言失败。</p>
<p>继续查 cppreference，发现 <code>std::sortable</code> 概念由 <code>std::permutable</code> 和 <code>std::indirect_strict_weak_order</code> 组成，填入相关参数使用静态断言尝试了一下，发现前者成功，后者失败，这就很奇怪了，这个关系明明是满足严格弱序的。</p>
<div class="rbcode">
<pre><code class="highlight cpp"><span class="built_in">static_assert</span>(indirect_strict_weak_order&lt;ranges::less, vector&lt;info&gt;::iterator&gt;); <span class="comment">//失败</span></code></pre>
</div>
<p>又研究了很久，发现只要把 <code>ranges::less</code> 改为 <code>std::less</code> 就成功了……？再次查 cppreference，在 <code>ranges::less</code> 的 Notes 部分找到了这样的描述：</p>
<blockquote>
<p>Unlike std::less, std::ranges::less requires all six comparison operators &lt;, &lt;=, &gt;, &gt;=, == and != to be valid (via the totally_ordered_with constraint).</p>
</blockquote>
<p>原来 <code>ranges::less</code> 不会像 <code>std::less</code> 一样直接调用 <code>&lt;</code> 来比较，还会检查是否以上六个符号都被定义。</p>
<p>那么应该把结构体改为：</p>
<div class="rbcode">
<pre><code class="highlight cpp"><span class="keyword">struct</span> <span class="title class_">info</span> &#123;
    <span class="type">int</span> l, r, o;
    <span class="type">int</span> d;
    <span class="keyword">auto</span> <span class="built_in">operator</span>&lt;=&gt;(<span class="type">const</span> info &amp;rhs) <span class="type">const</span> &#123; <span class="keyword">return</span> l &lt;=&gt; rhs.l; &#125;
    <span class="keyword">auto</span> <span class="keyword">operator</span>==(<span class="type">const</span> info &amp;rhs) <span class="type">const</span> &#123; <span class="keyword">return</span> l == rhs.l; &#125;
&#125;;</code></pre>
</div>
<p>这样就可以使用 <code>ranges::sort</code> 了。</p>
]]></content>
      <categories>
        <category>算法竞赛</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>C++</tag>
        <tag>Codeforces</tag>
        <tag>C++20</tag>
        <tag>计算几何</tag>
      </tags>
  </entry>
  <entry>
    <title>Codeforces 2123E MEX Count</title>
    <url>/2025/08/08/Codeforces-2123E-MEX-Count/</url>
    <content><![CDATA[<h1 id="题目"><a class="markdownIt-Anchor" href="#题目"></a> 题目</h1>
<p><strong>原题链接</strong>  <a href="https://codeforces.com/problemset/problem/2123/E">2123E MEX Count</a></p>
<p>定义一个数组的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">M</mi><mi mathvariant="normal">E</mi><mi mathvariant="normal">X</mi></mrow><annotation encoding="application/x-tex">\mathrm{MEX}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">M</span><span class="mord mathrm">E</span><span class="mord mathrm">X</span></span></span></span></span> 值为：数组中最小的未出现的非负整数。例如：</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="normal">M</mi><mi mathvariant="normal">E</mi><mi mathvariant="normal">X</mi></mrow><mo stretchy="false">(</mo><mo stretchy="false">[</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\mathrm{MEX}([2, 2, 1]) = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">M</span><span class="mord mathrm">E</span><span class="mord mathrm">X</span></span><span class="mopen">(</span><span class="mopen">[</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>，因为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span> 不在这个数组中。</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="normal">M</mi><mi mathvariant="normal">E</mi><mi mathvariant="normal">X</mi></mrow><mo stretchy="false">(</mo><mo stretchy="false">[</mo><mn>3</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">)</mo><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">\mathrm{MEX}([3, 1, 0, 1]) = 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">M</span><span class="mord mathrm">E</span><span class="mord mathrm">X</span></span><span class="mopen">(</span><span class="mopen">[</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>，因为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 在数组中但 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span> 不在。</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="normal">M</mi><mi mathvariant="normal">E</mi><mi mathvariant="normal">X</mi></mrow><mo stretchy="false">(</mo><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">]</mo><mo stretchy="false">)</mo><mo>=</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">\mathrm{MEX}([0, 3, 1, 2]) = 4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">M</span><span class="mord mathrm">E</span><span class="mord mathrm">X</span></span><span class="mopen">(</span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mclose">]</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span>，因为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">0, 1, 2, 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span></span></span></span> 都在数组中，但 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span> 不在。</li>
</ul>
<p>给定一个含 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 个非负整数的数组 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span>，对于所有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mtext> </mtext><mo stretchy="false">(</mo><mn>0</mn><mo>≤</mo><mi>k</mi><mo>≤</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">k \ (0 \le k \le n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace"> </span><span class="mopen">(</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83041em;vertical-align:-0.13597em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>，计算从 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span> 中移除 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 个值后 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="normal">M</mi><mi mathvariant="normal">E</mi><mi mathvariant="normal">X</mi></mrow><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathrm{MEX}(a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">M</span><span class="mord mathrm">E</span><span class="mord mathrm">X</span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span> 可能的取值个数。</p>
<span id="more"></span>
<h2 id="输入"><a class="markdownIt-Anchor" href="#输入"></a> 输入</h2>
<p>第一行为一个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mtext> </mtext><mo stretchy="false">(</mo><mn>1</mn><mo>≤</mo><mi>t</mi><mo>≤</mo><mn>1</mn><msup><mn>0</mn><mn>4</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">t \ (1 \le t \le 10^4)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">t</span><span class="mspace"> </span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，表示数据组数。接下来是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span></span></span></span> 组数据。对于每组数据：</p>
<p>第一行为一个整数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mtext> </mtext><mo stretchy="false">(</mo><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>2</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>5</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">n \ (1 \le n \le 2 \cdot 10^5)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mspace"> </span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，表示数组的大小。</p>
<p>第二行为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 个整数，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>a</mi><mi>n</mi></msub><mtext> </mtext><mo stretchy="false">(</mo><mn>0</mn><mo>≤</mo><msub><mi>a</mi><mi>i</mi></msub><mo>≤</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a_1, a_2, \cdots , a_n \ (0 \le a_i \le n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace"> </span><span class="mopen">(</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7859700000000001em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>。</p>
<p>保证所有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 之和不超过 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">2 \cdot 10^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span>。</p>
<h2 id="输出"><a class="markdownIt-Anchor" href="#输出"></a> 输出</h2>
<p>对于每组数据，输出一行，包含 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 个整数，分别表示移除 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 个值后 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="normal">M</mi><mi mathvariant="normal">E</mi><mi mathvariant="normal">X</mi></mrow><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathrm{MEX}(a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">M</span><span class="mord mathrm">E</span><span class="mord mathrm">X</span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span> 可能的取值个数，其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">k = 0, 1, \cdots , n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span></span></span></span>。</p>
<h2 id="样例"><a class="markdownIt-Anchor" href="#样例"></a> 样例</h2>
<p>输入 #1</p>
<div class="rbcode">
<pre><code class="highlight text">5
5
1 0 0 1 2
6
3 2 0 4 5 1
6
1 2 0 1 3 2
4
0 3 4 1
5
0 0 0 0 0</code></pre>
</div>
<p>输出 #1</p>
<div class="rbcode">
<pre><code class="highlight text">1 2 4 3 2 1
1 6 5 4 3 2 1
1 3 5 4 3 2 1
1 3 3 2 1
1 1 1 1 1 1</code></pre>
</div>
<h1 id="分析"><a class="markdownIt-Anchor" href="#分析"></a> 分析</h1>
<p>首先很容易发现删除 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span> 个值（即不删除值）时 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">M</mi><mi mathvariant="normal">E</mi><mi mathvariant="normal">X</mi></mrow><annotation encoding="application/x-tex">\mathrm{MEX}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">M</span><span class="mord mathrm">E</span><span class="mord mathrm">X</span></span></span></span></span> 值是唯一的。</p>
<p>此时要么 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∃</mi><mi>p</mi><mo>∈</mo><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mi>n</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mtext> </mtext><mi mathvariant="normal">∀</mi><mi>i</mi><mo>∈</mo><mrow><mo fence="true">[</mo><mn>0</mn><mo separator="true">,</mo><mi>p</mi><mo fence="true">)</mo></mrow><mo separator="true">,</mo><mtext> </mtext><mi>i</mi><mo>∈</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">\exists p \in [0, n], \ \forall i \in \left[0, p \right), \ i \in a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">∃</span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">∀</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">p</span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span> 并且 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo mathvariant="normal">∉</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">p \notin a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="mrel">∈</span></span><span class="mord vbox"><span class="thinbox"><span class="llap"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="inner"><span class="mord"><span class="mord">/</span><span class="mspace" style="margin-right:0.05555555555555555em;"></span></span></span><span class="fix"></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span> ；要么 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo mathvariant="normal">∉</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">0 \notin a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="mrel">∈</span></span><span class="mord vbox"><span class="thinbox"><span class="llap"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="inner"><span class="mord"><span class="mord">/</span><span class="mspace" style="margin-right:0.05555555555555555em;"></span></span></span><span class="fix"></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span>。后一种情况下答案显然全是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>，后面忽略。</p>
<p>然后考虑 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">k &gt; 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.73354em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span> 的情况。</p>
<p>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span> 中所有小于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span></span></span></span> 的值，如果出现的次数不多于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>，则都可以被删完，每删完一个值都会产生一个新的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">M</mi><mi mathvariant="normal">E</mi><mi mathvariant="normal">X</mi></mrow><annotation encoding="application/x-tex">\mathrm{MEX}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">M</span><span class="mord mathrm">E</span><span class="mord mathrm">X</span></span></span></span></span>。</p>
<p>出现次数多于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 的数和大于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span></span></span></span> 的数，删除后都不影响 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">M</mi><mi mathvariant="normal">E</mi><mi mathvariant="normal">X</mi></mrow><annotation encoding="application/x-tex">\mathrm{MEX}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">M</span><span class="mord mathrm">E</span><span class="mord mathrm">X</span></span></span></span></span>。</p>
<p>但这并不完全正确。例如考虑 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">a = [0, 1, \cdots, n-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span> 的情况，删除多于一个数都会让最初的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="normal">M</mi><mi mathvariant="normal">E</mi><mi mathvariant="normal">X</mi></mrow><mo>=</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">\mathrm{MEX} = n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">M</span><span class="mord mathrm">E</span><span class="mord mathrm">X</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 无法取到，也就是说删除后不影响 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">M</mi><mi mathvariant="normal">E</mi><mi mathvariant="normal">X</mi></mrow><annotation encoding="application/x-tex">\mathrm{MEX}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">M</span><span class="mord mathrm">E</span><span class="mord mathrm">X</span></span></span></span></span> 值的数不够删了（此例中没有删除后不影响 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">M</mi><mi mathvariant="normal">E</mi><mi mathvariant="normal">X</mi></mrow><annotation encoding="application/x-tex">\mathrm{MEX}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">M</span><span class="mord mathrm">E</span><span class="mord mathrm">X</span></span></span></span></span> 值的数），因此还要统计一下这些数的个数。在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 较大时，这些数可以作为缓冲，如果把这些数删完后 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 还有剩余，则需要相应减少 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">M</mi><mi mathvariant="normal">E</mi><mi mathvariant="normal">X</mi></mrow><annotation encoding="application/x-tex">\mathrm{MEX}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">M</span><span class="mord mathrm">E</span><span class="mord mathrm">X</span></span></span></span></span> 的可能数。</p>
<h1 id="代码实现"><a class="markdownIt-Anchor" href="#代码实现"></a> 代码实现</h1>
<p>由于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span> 中数值范围较小，可以直接统计一下出现次数：</p>
<div class="rbcode">
<pre><code class="highlight cpp"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v</span><span class="params">(n + <span class="number">1</span>)</span></span>;
<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;
    <span class="type">int</span> x;
    cin &gt;&gt; x;
    v[x]++;
&#125;</code></pre>
</div>
<p>然后计算 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span></span></span></span>。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>b</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">b_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 表示出现次数小于等于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> 的数的个数，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi></mrow><annotation encoding="application/x-tex">l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span> 分别表示下小于和大于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span></span></span></span> 的数的个数，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">u</span></span></span></span> 为删除后不影响 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">M</mi><mi mathvariant="normal">E</mi><mi mathvariant="normal">X</mi></mrow><annotation encoding="application/x-tex">\mathrm{MEX}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">M</span><span class="mord mathrm">E</span><span class="mord mathrm">X</span></span></span></span></span> 值的数的个数。</p>
<div class="rbcode">
<pre><code class="highlight cpp"><span class="type">int</span> p, l&#123;&#125;;
<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">b</span><span class="params">(n + <span class="number">1</span>)</span></span>;
<span class="keyword">for</span> (p = <span class="number">0</span>; p &lt;= n; p++) &#123;
    <span class="keyword">if</span> (!v[p]) <span class="keyword">break</span>;
    b[v[p]]++;
    l += v[p];
&#125;
<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;
    b[i] += b[i - <span class="number">1</span>];
&#125;
<span class="type">int</span> r = n - l, s1 = l - p;
<span class="type">int</span> u = s1 + r;</code></pre>
</div>
<p>最后当 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo>≥</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">u \ge k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 时答案为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>b</mi><mi>k</mi></msub><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">b_k + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>，否则为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>+</mo><mi>u</mi><mo>−</mo><mi>k</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">p + u - k + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7777700000000001em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>。<br />
根据变量间的关系，表达式实际上还可以化简，只需要知道 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span></span></span></span> 的值即可。</p>
<details class="mkmt mt-code">
<summary>完整代码</summary>
<pre><code class="highlight cpp"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span>
<span class="keyword">using</span> <span class="keyword">namespace</span> std;
<span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;
    <span class="type">int</span> n;
    cin &gt;&gt; n;
    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v</span><span class="params">(n + <span class="number">1</span>)</span></span>;
    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;
        <span class="type">int</span> x;
        cin &gt;&gt; x;
        v[x]++;
    &#125;
    <span class="type">int</span> p;
    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">b</span><span class="params">(n + <span class="number">1</span>)</span></span>;
    <span class="keyword">for</span> (p = <span class="number">0</span>; p &lt;= n; p++) &#123;
        <span class="keyword">if</span> (!v[p]) <span class="keyword">break</span>;
        b[v[p]]++;
    &#125;
    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;
        b[i] += b[i - <span class="number">1</span>];
    &#125;
    <span class="type">int</span> u = n - p;

    cout &lt;&lt; <span class="string">&quot;1&quot;</span>;
    <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">1</span>; k &lt;= n; k++) &#123;
        cout &lt;&lt; <span class="string">&#x27; &#x27;</span>;
        <span class="type">int</span> tmp = u - k;
        <span class="keyword">if</span> (tmp &gt;= <span class="number">0</span>) &#123;
            cout &lt;&lt; b[k] + <span class="number">1</span>;
        &#125; <span class="keyword">else</span> &#123;
            cout &lt;&lt; n - k + <span class="number">1</span>;
        &#125;
    &#125;
    cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;
&#125;
<span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;
    cin.<span class="built_in">tie</span>(<span class="number">0</span>)-&gt;<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);
    <span class="type">int</span> t;
    cin &gt;&gt; t;
    <span class="keyword">while</span> (t--) &#123;
        <span class="built_in">solve</span>();
    &#125;
    <span class="keyword">return</span> <span class="number">0</span>;
&#125;</code></pre>
</details>
]]></content>
      <categories>
        <category>算法竞赛</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>C++</tag>
        <tag>Codeforces</tag>
      </tags>
  </entry>
  <entry>
    <title>Java基础</title>
    <url>/2026/01/28/Java%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<h1 id="java基础知识"><a class="markdownIt-Anchor" href="#java基础知识"></a> Java基础知识</h1>
<h2 id="jre-和-jdk"><a class="markdownIt-Anchor" href="#jre-和-jdk"></a> JRE 和 JDK</h2>
<p>关系：</p>
<svg width="450" height="300" xmlns="http://www.w3.org/2000/svg">
 <g>
  <title>Layer 1</title>
  <g stroke="null" id="svg_32">
   <path stroke="#000000" id="svg_20" d="m225.00001,268.21242c-97.51381,0 -176.49999,-52.90169 -176.49999,-118.21242c0,-65.31073 78.98618,-118.21242 176.49999,-118.21242c97.51381,0 176.49999,52.90169 176.49999,118.21242c0,65.31073 -78.98618,118.21242 -176.49999,118.21242z" opacity="undefined" fill="none"/>
   <ellipse stroke="#000000" ry="78.26252" rx="104.78663" id="svg_25" cy="150" cx="167.36737" fill="none"/>
   <text transform="matrix(0.654917 0 0 0.654917 15.1837 15.3562)" stroke="#000" xml:space="preserve" text-anchor="start" font-family="Noto Sans JP" font-size="24" id="svg_8" y="105.25589" x="402.53777" stroke-width="0" fill="#000000">JDK</text>
   <g stroke="null" id="svg_30">
    <text transform="matrix(0.654917 0 0 0.654917 15.1837 15.3562)" stroke="#000" xml:space="preserve" text-anchor="start" font-family="Noto Sans JP" font-size="24" stroke-width="0" id="svg_7" y="216.25591" x="86.53776" fill="#000000">JRE</text>
    <g stroke="null" id="svg_29">
     <g stroke="null" id="svg_27">
      <ellipse stroke="#000000" ry="22.92208" rx="60.25231" id="svg_23" cy="123.14842" cx="178.71922" fill="none"/>
      <text transform="matrix(0.654917 0 0 0.654917 15.1837 15.3562)" stroke="#000" xml:space="preserve" text-anchor="start" font-family="Noto Sans JP" font-size="24" id="svg_9" y="175.25587" x="176.12106" stroke-width="0" fill="#000000">JVM（跨平台）</text>
     </g>
     <g stroke="null" id="svg_28">
      <ellipse stroke="#000000" ry="22.92208" rx="60.25231" id="svg_26" cy="176.85158" cx="178.71923" fill="none"/>
      <text transform="matrix(0.654917 0 0 0.654917 15.1837 15.3562)" stroke="#000" xml:space="preserve" text-anchor="start" font-family="Noto Sans JP" font-size="24" id="svg_10" y="257.25586" x="201.70438" stroke-width="0" fill="#000000">核心类库</text>
     </g>
    </g>
   </g>
   <g stroke="null" id="svg_31">
    <ellipse stroke="#000" ry="35.03803" rx="47.80891" id="svg_3" cy="150" cx="341.6843" fill="#fff"/>
    <text transform="matrix(0.654917 0 0 0.654917 15.1837 15.3562)" stroke="#000" xml:space="preserve" text-anchor="start" font-family="Noto Sans JP" font-size="24" id="svg_11" y="216.2559" x="450.53782" stroke-width="0" fill="#000000">开发工具</text>
   </g>
  </g>
 </g>
</svg>
<span id="more"></span>
<h2 id="idea-管理-java-程序的结构"><a class="markdownIt-Anchor" href="#idea-管理-java-程序的结构"></a> IDEA 管理 java 程序的结构</h2>
<blockquote>
<ol>
<li>project</li>
<li>module</li>
<li>package</li>
<li>class</li>
</ol>
</blockquote>
<h2 id="hello-world"><a class="markdownIt-Anchor" href="#hello-world"></a> Hello World</h2>
<details class="mkmt mt-code " open>
<summary>代码：</summary>
<pre><code class="highlight java"><span class="comment">// HelloWorld.java</span>
<span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> &#123;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;
        System.out.println(<span class="string">&quot;Hello World!&quot;</span>);
    &#125;
&#125;</code></pre>
</details>
<p>注意：</p>
<ul>
<li>文件名必须与类名一致</li>
<li>编译：<code>javac HelloWorld.java</code></li>
<li>运行：<code>java HelloWorld</code></li>
<li>Java11 开始可以直接用 <code>java</code> 命令运行源代码</li>
</ul>
<h1 id="语法基础"><a class="markdownIt-Anchor" href="#语法基础"></a> 语法基础</h1>
<h2 id="注释"><a class="markdownIt-Anchor" href="#注释"></a> 注释</h2>
<ul>
<li>单行注释 <code>//</code></li>
<li>多行注释<div class="rbcode">
<pre><code class="highlight java"><span class="comment">/*</span>
<span class="comment">...</span>
<span class="comment">*/</span></code></pre>
</div>
</li>
<li>文档注释<div class="rbcode">
<pre><code class="highlight java"><span class="comment">/**</span>
<span class="comment"> * ...</span>
<span class="comment"> */</span></code></pre>
</div>
</li>
</ul>
<h2 id="数据类型"><a class="markdownIt-Anchor" href="#数据类型"></a> 数据类型</h2>
<table>
    <tr>
        <th align="center" colspan="2">类型</th>
        <th align="center">字节数</th>
    </tr>
    <tr>
        <td align="center" rowspan="4">整型</td>
        <td align="center">byte</td>
        <td align="center">1</td>
    </tr>
    <tr>
        <td align="center">short</td>
        <td align="center">2</td>
    </tr>
    <tr>
        <td align="center">int</td>
        <td align="center">4</td>
    </tr>
    <tr>
        <td align="center">long</td>
        <td align="center">8</td>
    </tr>
    <tr>
        <td align="center" rowspan="2">浮点型</td>
        <td align="center">float</td>
        <td align="center">4</td>
    </tr>
    <tr>
        <td align="center">double</td>
        <td align="center">8</td>
    </tr>
    <tr>
        <td align="center">字符型</td>
        <td align="center">char</td>
        <td align="center">2</td>
    </tr>
    <tr>
        <td align="center">布尔型</td>
        <td align="center">boolean</td>
        <td align="center">1</td>
    </tr>
</table>
<h2 id="字面量"><a class="markdownIt-Anchor" href="#字面量"></a> 字面量</h2>
<ul>
<li>整数，小数，字符，字符串，布尔值与 C++ 基本相同</li>
<li>空值：<code>null</code></li>
<li>二进制字面量以 <code>0b</code> 或 <code>0B</code> 开头，十六进制字面量以 <code>0x</code> 或 <code>0X</code> 开头</li>
<li>整型字面量默认为 <code>int</code> 类型，浮点型字面量默认为 <code>double</code> 类型。</li>
<li><code>long</code> 字面量后缀为 <code>l</code> 或 <code>L</code></li>
<li><code>float</code> 字面量后缀为 <code>f</code> 或 <code>F</code></li>
</ul>
<h2 id="类型转换"><a class="markdownIt-Anchor" href="#类型转换"></a> 类型转换</h2>
<ul>
<li>
<p><strong>自动类型转换：</strong></p>
<p>范围小的变量可直接赋值给范围大的变量，包括初始化。</p>
</li>
<li>
<p><strong>类型提升：</strong></p>
<p>与 C++ 类似。<code>byte</code>，<code>short</code>，<code>char</code> 会直接转换为 <code>int</code> 类型运算。</p>
</li>
<li>
<p><strong>强制类型转换：</strong></p>
<p>范围大的变量不能直接赋值给范围小的变量，需要强制转换。</p>
<p>但复合赋值运算符会<strong>隐式</strong>强制类型转换。</p>
</li>
</ul>
<h2 id="运算符"><a class="markdownIt-Anchor" href="#运算符"></a> 运算符</h2>
<ul>
<li><code>+</code> 可作为连接符：能加就加，不能加就转换为字符串连接。</li>
<li><code>=</code> 赋值运算符不能隐式收缩转换</li>
<li><code>? :</code> 三元运算符与 C++ 相同</li>
</ul>
<h2 id="scanner"><a class="markdownIt-Anchor" href="#scanner"></a> Scanner</h2>
<p>当使用的类不是 <code>java.lang</code> 包中的时，需要导入。</p>
<p><code>Scanner</code> 位于 <code>java.util.Scanner</code>。</p>
<p>创建 <code>Scanner</code>：</p>
<div class="rbcode">
<pre><code class="highlight java"><span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</code></pre>
</div>
<table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>String nextLine()</code></td>
<td>读取下一行输入</td>
</tr>
<tr>
<td><code>String next()</code></td>
<td>读取下一个单词</td>
</tr>
<tr>
<td><code>int nextInt()</code></td>
<td>读取下一个整数</td>
</tr>
<tr>
<td><code>double nextDouble()</code></td>
<td>读取下一个浮点数</td>
</tr>
<tr>
<td><code>boolean hasNext()</code></td>
<td>检测输入流中是否还有单词</td>
</tr>
<tr>
<td><code>boolean hasNextInt()</code></td>
<td>检测下一个字符序列是否是一个整数</td>
</tr>
<tr>
<td><code>boolean hasNextDouble()</code></td>
<td>检测下一个字符序列是否是一个浮点数</td>
</tr>
</tbody>
</table>
<h2 id="随机数"><a class="markdownIt-Anchor" href="#随机数"></a> 随机数</h2>
<p><code>Random</code> 位于 <code>java.util.Random</code>。</p>
<p>生成 0 - 99 间的随机数：</p>
<div class="rbcode">
<pre><code class="highlight java"><span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();
<span class="type">int</span> <span class="variable">rs</span> <span class="operator">=</span> r.nextInt(<span class="number">100</span>);</code></pre>
</div>
<h2 id="数组"><a class="markdownIt-Anchor" href="#数组"></a> 数组</h2>
<p><strong>声明和创建：</strong></p>
<div class="rbcode">
<pre><code class="highlight java"><span class="type">int</span>[] a;
<span class="type">int</span>[] b = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">100</span>]; <span class="comment">//动态</span>
<span class="type">int</span>[] c = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;; <span class="comment">//静态</span>
<span class="type">int</span>[] d = &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;; <span class="comment">//简写</span></code></pre>
</div>
<p>静态初始化和动态初始化时独立的，不能混用：</p>
<div class="rbcode">
<pre><code class="highlight java"><span class="type">int</span>[] a = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>]&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;; <span class="comment">//错误</span></code></pre>
</div>
<p>动态初始化数组时，数值类型元素会初始化为 <code>0</code> 或 <code>false</code>，对象类型元素初始化为 <code>null</code>。</p>
<p><strong>数组长度：</strong> <code>a.length</code></p>
<p>数组拷贝会引用同一个数组对象。</p>
<h2 id="访问修饰符"><a class="markdownIt-Anchor" href="#访问修饰符"></a> 访问修饰符</h2>
<p><strong>对成员修饰：</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">修饰符</th>
<th style="text-align:center">本类</th>
<th style="text-align:center">同包中其他类</th>
<th style="text-align:center">任意包中子类</th>
<th style="text-align:center">任意包中任意类</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">private</td>
<td style="text-align:center">✓</td>
<td style="text-align:center">✗</td>
<td style="text-align:center">✗</td>
<td style="text-align:center">✗</td>
</tr>
<tr>
<td style="text-align:center">默认</td>
<td style="text-align:center">✓</td>
<td style="text-align:center">✓</td>
<td style="text-align:center">✗</td>
<td style="text-align:center">✗</td>
</tr>
<tr>
<td style="text-align:center">protected</td>
<td style="text-align:center">✓</td>
<td style="text-align:center">✓</td>
<td style="text-align:center">✓</td>
<td style="text-align:center">✗</td>
</tr>
<tr>
<td style="text-align:center">public</td>
<td style="text-align:center">✓</td>
<td style="text-align:center">✓</td>
<td style="text-align:center">✓</td>
<td style="text-align:center">✓</td>
</tr>
</tbody>
</table>
<p><strong>对类修饰：</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">修饰符</th>
<th style="text-align:center">可见性</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">private</td>
<td style="text-align:center">不允许声明</td>
</tr>
<tr>
<td style="text-align:center">默认</td>
<td style="text-align:center">同一包内的类</td>
</tr>
<tr>
<td style="text-align:center">protected</td>
<td style="text-align:center">不允许声明</td>
</tr>
<tr>
<td style="text-align:center">public</td>
<td style="text-align:center">所有类</td>
</tr>
</tbody>
</table>
<h1 id="常用-api"><a class="markdownIt-Anchor" href="#常用-api"></a> 常用 API</h1>
<h2 id="string"><a class="markdownIt-Anchor" href="#string"></a> String</h2>
<p><strong>构造器：</strong></p>
<ul>
<li><code>String()</code></li>
<li><code>String(String original)</code></li>
<li><code>String(char[] chars)</code></li>
<li><code>String(byte[] bytes)</code></li>
</ul>
<p><strong>常用方法：</strong></p>
<ul>
<li><code>int length()</code></li>
<li><code>char charAt(int index)</code></li>
<li><code>char[] toCharArray()</code></li>
<li><code>boolean equals(Object anObject)</code></li>
<li><code>boolean equalsIgnoreCase(String anotherString)</code></li>
<li><code>String substring(int beginIndex, int endIndex)</code></li>
<li><code>String substring(int beginIndex)</code></li>
<li><code>String replace(CharSequence target, CharSequence replacement)</code></li>
<li><code>boolean contains(CharSequence s)</code></li>
<li><code>boolean startsWith(String prefix)</code></li>
<li><code>String[] split(String regex)</code></li>
</ul>
<h2 id="arrayliste"><a class="markdownIt-Anchor" href="#arrayliste"></a> ArrayList&lt;E&gt;</h2>
<p><strong>构造器：</strong></p>
<ul>
<li><code>ArrayList()</code>：创建一个初始容量为 10 的数组列表</li>
<li><code>ArrayList(int initialCapacity)</code></li>
</ul>
<p><strong>常用方法：</strong></p>
<ul>
<li><code>boolean add(E e)</code>：成功返回 <code>true</code></li>
<li><code>E get(int index)</code></li>
<li><code>void add(int index, E element)</code></li>
<li><code>int size()</code></li>
<li><code>E remove(int index)</code>：返回被删除的元素</li>
<li><code>boolean remove(Object o)</code>：删除指定元素，返回之前是否存在</li>
<li><code>E set(int index, E element)</code>：返回被修改的元素</li>
</ul>
<p>注意，<code>ArrayList</code> 不能使用基本数据类型，要使用对应的包装类。</p>
<h2 id="object-类"><a class="markdownIt-Anchor" href="#object-类"></a> Object 类</h2>
<p><code>public String toString()</code>：</p>
<ul>
<li>默认得到地址</li>
<li>重写后改变输出</li>
</ul>
<p><code>public boolean equals(Object o)</code>：</p>
<ul>
<li>默认比较地址，与 <code>==</code> 作用相同</li>
<li>一般重写为比较内容</li>
</ul>
<p><code>protected Object clone()</code>：</p>
<ul>
<li>默认无法通过子类对象访问</li>
<li>需要重写，提供 <code>public</code> 修饰符</li>
<li>不可变成员可以直接浅拷贝</li>
<li>要实现 <code>Cloneable</code> 接口，这是一个标记接口</li>
</ul>
<h2 id="objects-类"><a class="markdownIt-Anchor" href="#objects-类"></a> Objects 类</h2>
<p><code>public static boolean equals(Object a, Object b)</code>：</p>
<ul>
<li>先做 <code>null</code> 判断，再比较两个对象</li>
</ul>
<p><code>public static boolean isNull(Object obj)</code>：</p>
<ul>
<li>等价于 <code>obj == null</code></li>
</ul>
<p><code>public static boolean nonNull(Object obj)</code>：</p>
<ul>
<li>等价于 <code>obj != null</code></li>
</ul>
<h2 id="包装类"><a class="markdownIt-Anchor" href="#包装类"></a> 包装类</h2>
<p><code>int</code> 类型对应的包装类是 <code>Integer</code>，<code>char</code> 是 <code>Character</code>，其他基本类型只需要首字母大写。</p>
<p><code>Integer.valueOf(int i)</code>：会对小范围整数对象进行缓存，效率更高。因此构造器被弃用。</p>
<p>自动装箱、拆箱：直接与 <code>int</code> 混用。</p>
<p>常用方法：</p>
<ul>
<li><code>public static String toString(int i)</code>：转换为字符串</li>
<li><code>public static String toString(int i, int radix)</code>：转换为目标进制字符串</li>
<li><code>public String toString()</code>：在包装类对象上调用</li>
<li><code>public static int parseInt(String s)</code>：转换为整数</li>
<li><code>public static Integer valueOf(String s)</code>：转换为整数并装箱</li>
<li><code>public static int parseInt(String s, int radix)</code>：某进制字符串转换为整数</li>
<li><code>public static Integer valueOf(String s, int radix)</code>：某进制字符串转换为整数并装箱</li>
</ul>
<h2 id="stringbuilder-和-stringbuffer"><a class="markdownIt-Anchor" href="#stringbuilder-和-stringbuffer"></a> StringBuilder 和 StringBuffer</h2>
<h3 id="stringbuilder"><a class="markdownIt-Anchor" href="#stringbuilder"></a> StringBuilder</h3>
<p><strong>构造器：</strong></p>
<ul>
<li><code>StringBuilder()</code>：空构建器，初始容量为 16 字符</li>
<li><code>StringBuilder(int capacity)</code>：指定初始容量</li>
<li><code>StringBuilder(CharSequence seq)</code>：指定初始内容为 <code>seq</code></li>
<li><code>StringBuilder(String str)</code>：指定初始内容为 <code>str</code></li>
</ul>
<p><strong>常用方法：</strong></p>
<ul>
<li><code>StringBuilder append(...)</code>：支持追加各种类型数据，返回对象本身</li>
<li><code>StringBuilder reverse()</code>：反转内容</li>
<li><code>int length()</code>：返回长度</li>
<li><code>String toString()</code>：转换为字符串</li>
</ul>
<h3 id="stringbuffer"><a class="markdownIt-Anchor" href="#stringbuffer"></a> StringBuffer</h3>
<ul>
<li>用法与 <code>StringBuilder</code> 相同</li>
<li>区别是 <code>StringBuffer</code> 是线程安全的</li>
</ul>
<h2 id="stringjoiner"><a class="markdownIt-Anchor" href="#stringjoiner"></a> StringJoiner</h2>
<p>从 JDK 8 开始加入，有些场景下操作字符串更简洁。</p>
<p><strong>构造器：</strong></p>
<ul>
<li><code>StringJoiner(间隔符号)</code></li>
<li><code>StringJoiner(间隔符号, 开始符号, 结束符号)</code></li>
</ul>
<p><strong>常用方法：</strong></p>
<ul>
<li><code>StringJoiner add(添加内容)</code>：添加数据，并返回对象本身</li>
<li><code>int length()</code></li>
<li><code>String toString()</code></li>
</ul>
<h2 id="math"><a class="markdownIt-Anchor" href="#math"></a> Math</h2>
<ul>
<li><code>int abs(int a)</code></li>
<li><code>double ceil(double a)</code></li>
<li><code>double floor(double a)</code></li>
<li><code>int round(float a)</code></li>
<li><code>int max(int a, int b)</code></li>
<li><code>double pow(double a, double b)</code></li>
<li><code>double random()</code>：随机值范围 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">[</mo><mtext> </mtext><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo fence="true">)</mo></mrow><annotation encoding="application/x-tex">\left[\,0, 1\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">[</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span></li>
</ul>
<h2 id="system"><a class="markdownIt-Anchor" href="#system"></a> System</h2>
<ul>
<li><code>void exit(int status)</code>：实际调用的是 <code>Runtime</code> 对象的方法</li>
<li><code>long currentTimeMillis()</code>：返回 1970-1-1 0:00 到当前的毫秒数</li>
</ul>
<h2 id="runtime"><a class="markdownIt-Anchor" href="#runtime"></a> Runtime</h2>
<p>代表程序的运行环境，是一个单例类。可以使用 <code>getRuntime()</code> 方法获得当前运行时对象。</p>
<p><strong>常见方法：</strong></p>
<ul>
<li><code>void exit(int status)</code></li>
<li><code>int availableProcessors()</code>：返回 Java 虚拟机可用的处理器数</li>
<li><code>long totalMemory()</code>：返回虚拟机中的内存总量</li>
<li><code>long freeMemory()</code>：返回虚拟机中的可用内存</li>
<li><code>Process exec(String commnad)</code>：启动某个程序，并返回代表该程序的对象</li>
</ul>
<h2 id="bigdecimal"><a class="markdownIt-Anchor" href="#bigdecimal"></a> BigDecimal</h2>
<p><strong>构造器：</strong></p>
<ul>
<li><code>BigDecimal(double val)</code>：不推荐</li>
<li><code>BigDecimal(String val)</code></li>
</ul>
<p><strong>常用方法：</strong></p>
<ul>
<li><code>static BigDecimal(double val)</code></li>
<li>运算：<code>add</code>、<code>substract</code>、<code>multiply</code>、<code>divide</code></li>
<li><code>BigDecimal divide(对象, 精确到几位, 舍入模式)</code></li>
<li><code>double doubleValue()</code></li>
</ul>
<p>除法如果不能精确表示结果会产生异常，必须指定如何舍入。四舍五入：<code>RoundingMode.HALF_UP</code></p>
<h2 id="jdk-8-之前的日期和时间"><a class="markdownIt-Anchor" href="#jdk-8-之前的日期和时间"></a> JDK 8 之前的日期和时间</h2>
<h3 id="date"><a class="markdownIt-Anchor" href="#date"></a> Date</h3>
<p><strong>构造器：</strong></p>
<ul>
<li><code>Date()</code>：构造一个 <code>Date</code> 对象，代表当前日期和时间</li>
<li><code>Date(long time)</code>：由时间毫秒值构造日期对象</li>
</ul>
<p><strong>常用方法：</strong></p>
<ul>
<li><code>long getTime()</code>：返回时间毫秒数</li>
<li><code>void setTime(long time)</code>：设置对象时间为时间毫秒数对应的时间</li>
</ul>
<h3 id="simpledateformat"><a class="markdownIt-Anchor" href="#simpledateformat"></a> SimpleDateFormat</h3>
<p><strong>构造器：</strong></p>
<ul>
<li><code>SimpleDateFormat(String pattern)</code>：创建对象并封装时间的格式</li>
</ul>
<p><strong>格式描述方法：</strong></p>
<table>
    <tr>
        <td><b>y</b></td>
        <td>年</td>
        <td><b>m</b></td>
        <td>分</td>
    </tr>
    <tr>
        <td><b>M</b></td>
        <td>月</td>
        <td><b>s</b></td>
        <td>秒</td>
    </tr>
    <tr>
        <td><b>d</b></td>
        <td>日</td>
        <td><b>EEE</b></td>
        <td>星期</td>
    </tr>
    <tr>
        <td><b>H</b></td>
        <td>时</td>
        <td><b>a</b></td>
        <td>上午/下午</td>
    </tr>
</table>
<p>示例用法：<code>&quot;yyyy年MM月dd日 HH:mm:ss EEE a&quot;</code></p>
<p><strong>常用方法：</strong></p>
<ul>
<li><code>final String format(Date date)</code>：将日期格式化为日期/时间字符串</li>
<li><code>final String format(Object time)</code>：将时间毫秒值格式化为日期/时间字符串</li>
<li><code>Date parse(String source)</code>：把字符串时间解析成日期对象，格式不一致会抛出异常</li>
</ul>
<h2 id="jdk-8-之后的日期和时间"><a class="markdownIt-Anchor" href="#jdk-8-之后的日期和时间"></a> JDK 8 之后的日期和时间</h2>
<h3 id="对比"><a class="markdownIt-Anchor" href="#对比"></a> 对比</h3>
<ul>
<li>JDK 8 之前：都是可变对象，线程不安全，只能精确到毫秒</li>
<li>JDK 8 之后：都是不可变对象，线程安全，能精确到毫秒、纳秒</li>
</ul>
<h3 id="新增的-api"><a class="markdownIt-Anchor" href="#新增的-api"></a> 新增的 API</h3>
<table>
    <tr>
        <th>作用</th>
        <th colspan="2">API</th>
    </tr>
    <tr>
        <td rowspan="5">代替 Calendar</td>
        <td>LocalDate</td>
        <td>年、月、日、星期</td>
    <tr>
        <td>LocalTime</td>
        <td>时、分、秒、纳秒</td>
    </tr>
    <tr>
        <td>LocalDateTime</td>
        <td>两者结合</td>
    </tr>
    <tr>
        <td>ZoneId</td>
        <td>时区</td>
    </tr>
    <tr>
        <td>ZoneDateTime</td>
        <td>带时区的时间</td>
    </tr>
    <tr>
        <td>代替 Date</td>
        <td>Instant</td>
        <td>时间戳/时间线</td>
    </tr>
    <tr>
        <td>代替 SimpleDateFormat</td>
        <td>DateTimeFormatter</td>
        <td>时间格式化和解析</td>
    </tr>
    <tr>
        <td rowspan="2">其他补充</td>
        <td>Period</td>
        <td>时间间隔（年、月、日）</td>
    </tr>
    <tr>
        <td>Duration</td>
        <td>时间间隔（时、分、秒、纳秒）</td>
    </tr>
</table>
<h3 id="localdate-localtime-和-localdatetime"><a class="markdownIt-Anchor" href="#localdate-localtime-和-localdatetime"></a> LocalDate、LocalTime 和 LocalDateTime</h3>
<p>**获取对象：**调用静态方法 <code>now()</code> 方法获取当前时间对应的对象</p>
<p><strong>用法：</strong></p>
<p><strong>LocalDate：</strong></p>
<ul>
<li>输出：<code>年-月-日</code></li>
<li>获取对象中的信息：
<ul>
<li>年：<code>getYear()</code></li>
<li>月：<code>getMonthValue()</code></li>
<li>日：<code>getDayOfMonth()</code></li>
<li>一年中的第几天：<code>getDayOfYear()</code></li>
<li>星期几：<code>getDayOfWeek().getValue()</code></li>
</ul>
</li>
<li>修改某个信息：<code>withYear</code>、<code>withMonth</code>、<code>withDayOfMonth</code>、<code>withDayOfYear</code></li>
<li>把某个信息加多少：<code>plusYears</code>、<code>plusMonths</code>、<code>plusDays</code>、<code>plusWeeks</code></li>
<li>把某个信息减多少：改成 <code>minus</code></li>
<li>获取指定日期的对象：<code>LocalDate.of(年, 月, 日)</code></li>
<li>比较两个日期对象：<code>equals</code>、<code>isBefore</code>、<code>isAfter</code></li>
</ul>
<p><strong>LocalTime：</strong></p>
<ul>
<li>输出：<code>时:分:秒.纳秒</code></li>
<li>获取对象中的信息：<code>getHour</code>、<code>getMinute</code>、<code>getSecond</code>、<code>getNano</code></li>
<li>修改某个信息：改成 <code>with</code></li>
<li>加减：<code>plus</code>、<code>minus</code></li>
<li>比较：同上</li>
</ul>
<p><strong>LocalDateTime：</strong></p>
<ul>
<li>输出：<code>年-月-日T时:分:秒.纳秒</code></li>
<li>包含前两者的方法</li>
<li>转换：
<ul>
<li><code>toLocalDate()</code></li>
<li><code>toLocalTime()</code></li>
<li><code>of(LocalDate date, LocalTime time)</code></li>
</ul>
</li>
</ul>
<h3 id="zoneid-和-zonedatetime"><a class="markdownIt-Anchor" href="#zoneid-和-zonedatetime"></a> ZoneId 和 ZoneDateTime</h3>
<p><strong>ZoneId：</strong></p>
<ul>
<li>获取系统默认时区：使用 <code>static ZoneId systemDefault()</code> 获取 <code>ZoneId</code> 对象，使用 <code>String getId()</code> 方法获取时区。默认以 <code>getId</code> 内容输出。</li>
<li>获取 Java 支持的全部时区 Id：<code>static Set&lt;String&gt; getAvailableZoneIds()</code></li>
<li>把某个时区 Id 封装成 ZoneId 对象：<code>static ZoneId of(String zoneId)</code></li>
</ul>
<p>**ZoneDateTime：**带时区的时间</p>
<ul>
<li>获取某个时区的 ZoneDateTime 对象：<code>static ZoneDateTime now(ZoneId zone)</code></li>
<li>获取系统默认时区的 ZoneDateTime 对象：<code>static ZoneDateTime now()</code></li>
<li>获取世界标准时间：<code>ZoneDateTime.now(Clock.systemUTC())</code></li>
<li>其他方法与 LocalDateTime 相同</li>
</ul>
<h3 id="instant"><a class="markdownIt-Anchor" href="#instant"></a> Instant</h3>
<p>通过 Instant 可以拿到此刻的时间，包括从 1970 开始的总秒数和不够一秒的纳秒数。</p>
<p><strong>常用方法：</strong></p>
<ul>
<li><code>static Instant now()</code>： 获取当前 Instant 对象</li>
<li><code>long getEpochSecond()</code>：获取 1970 开始的秒数</li>
<li><code>int getNano()</code>：获取不足一秒的纳秒数</li>
<li>增加时间：<code>plusSeconds</code>、<code>plusMillis</code>、<code>plusNanos</code></li>
<li>减少时间：改为 <code>minus</code></li>
<li>比较时间：<code>equals</code>、<code>isBefore</code>、<code>isAfter</code></li>
</ul>
<h3 id="datetimeformatter"><a class="markdownIt-Anchor" href="#datetimeformatter"></a> DateTimeFormatter</h3>
<p><strong>常用方法：</strong></p>
<ul>
<li><code>static DateTimeFormatter ofPattern(时间格式)</code>：获取格式化器对象</li>
<li><code>String format(时间对象)</code>：格式化时间</li>
</ul>
<p>时间对象也可以调用自己的 <code>format</code> 方法，传入一个 DateTimeFormatter 对象。</p>
<p>解析时间：一般用 LocalDateTime 提供的方法解析，调用 <code>static parse(字符串, 格式化器)</code>。</p>
<h3 id="period"><a class="markdownIt-Anchor" href="#period"></a> Period</h3>
<p>用于计算两个 LocalDate 对象相差的年、月、日。</p>
<p><strong>常用方法：</strong></p>
<ul>
<li>得到 Period 对象：<code>static Period between(LocalDate start, LocalDate end)</code></li>
<li>得到间隔：<code>getYears</code>、<code>getMonths</code>、<code>getDays</code></li>
</ul>
<h3 id="duration"><a class="markdownIt-Anchor" href="#duration"></a> Duration</h3>
<p>用于计算相差的天数、时、分、秒、纳秒。支持 LocalTime、LocalDateTime、Instant。</p>
<p><strong>常用方法：</strong></p>
<ul>
<li>得到对象：<code>static Duration between(开始对象, 截止对象)</code></li>
<li>计算间隔：<code>toDays</code>、<code>toHours</code>、<code>toMinutes</code>、<code>toSeconds</code>、<code>toMillis</code>、<code>toNanos</code></li>
</ul>
<h2 id="arrays"><a class="markdownIt-Anchor" href="#arrays"></a> Arrays</h2>
<p>用于操作数组的一个工具类。</p>
<p><strong>常用方法：</strong></p>
<ul>
<li><code>static String toString(T[] arr)</code>：返回数组内容</li>
<li><code>static T[] copyOfRange(T[] arr, int begin, int end)</code>：拷贝数组</li>
<li><code>static T[] copyOf(T[] arr, int newLength)</code>：拷贝数组，不足的数据会值初始化</li>
<li><code>static void setAll(T[] arr, IntFunction&lt;? extends T&gt; generator)</code>：把数组中原数据修改为新数据</li>
<li><code>static void sort(T[] arr)</code>：排序</li>
</ul>
<p><strong>排序：</strong></p>
<p>自定义排序规则：</p>
<ul>
<li>实现 <code>Comparable&lt;T&gt;</code> 接口，重写 <code>compareTo(T o)</code> 方法</li>
<li>使用 <code>static &lt;T&gt; void sort(T[] arr, Comparator&lt;? super T&gt; c)</code></li>
</ul>
<h1 id="面向对象高级"><a class="markdownIt-Anchor" href="#面向对象高级"></a> 面向对象高级</h1>
<h2 id="初始化块"><a class="markdownIt-Anchor" href="#初始化块"></a> 初始化块</h2>
<p><strong>静态代码块：</strong></p>
<ul>
<li>格式：<code>static &#123;...&#125;</code></li>
<li>类加载时执行</li>
</ul>
<p><strong>实例代码块：</strong></p>
<ul>
<li>格式：<code>&#123;...&#125;</code></li>
<li>执行流程：
<ol>
<li>执行委托构造</li>
<li>将所有实例字段值初始化</li>
<li>按照类中声明顺序，执行字段初始化和初始化块</li>
<li>执行构造器主体代码</li>
</ol>
</li>
</ul>
<h2 id="单例模式"><a class="markdownIt-Anchor" href="#单例模式"></a> 单例模式</h2>
<p><strong>饿汉式单例</strong>：拿对象时，已经创建好了</p>
<div class="rbcode">
<pre><code class="highlight java"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A</span> &#123;
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">A</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();
    <span class="keyword">private</span> <span class="title function_">A</span><span class="params">()</span> &#123;&#125;
    <span class="keyword">public</span> <span class="keyword">static</span> A <span class="title function_">getInstance</span><span class="params">()</span> &#123;
        <span class="keyword">return</span> instance;
    &#125;
&#125;</code></pre>
</div>
<p><strong>懒汉式单例</strong>：拿对象时，才创建对象</p>
<div class="rbcode">
<pre><code class="highlight java"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A</span> &#123;
    <span class="keyword">private</span> <span class="keyword">static</span> A instance;
    <span class="keyword">private</span> <span class="title function_">A</span><span class="params">()</span> &#123;&#125;
    <span class="keyword">public</span> <span class="keyword">static</span> A <span class="title function_">getInstance</span><span class="params">()</span> &#123;
        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;
            instance = <span class="keyword">new</span> <span class="title class_">A</span>();
        &#125;
        <span class="keyword">return</span> instance;
    &#125;
&#125;</code></pre>
</div>
<h2 id="方法重写"><a class="markdownIt-Anchor" href="#方法重写"></a> 方法重写</h2>
<p>与 C++ 不同，不需要使用 <code>virtual</code> 即可重写方法。</p>
<p>可以使用 <code>@Override</code> 注解检查重写是否正确，与 Python 装饰器使用格式相同。</p>
<p>重写支持协变返回类型。</p>
<p>重写 <code>toString()</code> 方法可改变默认输出。</p>
<p>重写方法的访问权限必须大于等于父类被重写方法的访问权限。私有方法，静态方法不能重写。</p>
<h2 id="成员隐藏"><a class="markdownIt-Anchor" href="#成员隐藏"></a> 成员隐藏</h2>
<p>子类与父类同名的成员会隐藏父类的成员，可使用 <code>super</code> 访问。</p>
<p>局部变量也会隐藏成员变量，可使用 <code>this</code> 访问。</p>
<h2 id="子类构造器"><a class="markdownIt-Anchor" href="#子类构造器"></a> 子类构造器</h2>
<ul>
<li>子类构造器都会先调用父类构造器</li>
<li>默认调用父类无参构造器</li>
<li>可使用 <code>super(...)</code> 调用父类其他构造器，尤其是父类没有无参构造器的时候</li>
</ul>
<h2 id="final"><a class="markdownIt-Anchor" href="#final"></a> final</h2>
<ul>
<li>修饰类：不能被继承</li>
<li>修饰方法：不能被重写</li>
<li>修饰变量：只能被赋值一次</li>
</ul>
<p><strong>常量：</strong></p>
<p>使用 <code>static final</code> 修饰的成员变量被称为常量。<br />
编译后，常量会被宏替换。</p>
<h2 id="抽象类"><a class="markdownIt-Anchor" href="#抽象类"></a> 抽象类</h2>
<ul>
<li>抽象类中不一定有抽象方法，包含抽象方法的一定要被声明为抽象类</li>
<li>抽象类不能创建实例，但可以创建抽象类的对象变量（指针）</li>
<li>没有抽象方法的抽象类也不能创建实例</li>
<li>子类重写全部抽象方法后，就可以去掉 <code>abstract</code> 修饰</li>
</ul>
<h2 id="接口"><a class="markdownIt-Anchor" href="#接口"></a> 接口</h2>
<p><strong>语法格式：</strong></p>
<div class="rbcode">
<pre><code class="highlight java"><span class="keyword">public</span> interface 接口名  &#123;
    <span class="comment">// 成员变量（常量，不用加 public static final）</span>
    <span class="comment">// 成员方法（抽象方法，不用加 public abstract）</span>
&#125;</code></pre>
</div>
<p>接口中所有方法都自动是 <code>public</code> 方法。</p>
<p>接口不能创建对象，用于被类实现，实现接口的类被称为实现类：</p>
<div class="rbcode">
<pre><code class="highlight java">访问修饰符 class 实现类 implements 接口<span class="number">1</span>, 接口<span class="number">2</span>, ... &#123;
    ...
&#125;</code></pre>
</div>
<p>实现类必须重写全部接口的全部抽象方法，否则需要被定义为抽象类。</p>
<p><strong>默认方法</strong> (since JDK 8)：用 <code>default</code> 修饰，带有方法体。可通过实现类调用。</p>
<p><strong>私有方法</strong> (since JDK 9)：用 <code>private</code> 修饰，可在其他方法中访问。</p>
<p><strong>静态方法</strong> (since JDK 8)：用 <code>static</code> 修饰，可通过接口名调用。</p>
<h2 id="内部类"><a class="markdownIt-Anchor" href="#内部类"></a> 内部类</h2>
<h3 id="成员内部类"><a class="markdownIt-Anchor" href="#成员内部类"></a> 成员内部类</h3>
<p><strong>使用内部类的原因：</strong></p>
<ul>
<li>内部类可以对同一个包中的其他类隐藏</li>
<li>内部类可以访问外部类中定义的私有数据</li>
</ul>
<div class="rbcode">
<pre><code class="highlight java"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Outer</span> &#123;
    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Inner</span> &#123;
        ...
    &#125;
&#125;</code></pre>
</div>
<p>在类的内部定义的类，基本与类相同。JDK 16 开始支持在内部类中定义静态成员。</p>
<p>内部类实例只能由外部类实例创建，有一个对创建它的外部类实例的隐式引用。</p>
<p>内部类可以是私有的。</p>
<ul>
<li>外部类引用：<code>OuterClass.this</code></li>
<li>构造内部类对象：<code>outerObject.new InnerClass(...)</code></li>
<li>在外部类作用域之外表示内部类：<code>OuterClass.InnerClass</code></li>
</ul>
<h3 id="静态内部类"><a class="markdownIt-Anchor" href="#静态内部类"></a> 静态内部类</h3>
<p><strong>使用静态内部类的原因：</strong></p>
<ul>
<li>把一个类隐藏在一个类的内部</li>
<li>不需要内部类有外部类对象的引用</li>
</ul>
<div class="rbcode">
<pre><code class="highlight java"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Outer</span> &#123;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Inner</span> &#123;
        ...
    &#125;
&#125;</code></pre>
</div>
<p>构造静态内部类对象：<code>new OuterClass.InnerClass()</code></p>
<h3 id="局部内部类"><a class="markdownIt-Anchor" href="#局部内部类"></a> 局部内部类</h3>
<p>在一个方法中可定义局部内部类，对外界完全隐藏。</p>
<p>声明局部类时不能有访问说明符。</p>
<h3 id="匿名内部类"><a class="markdownIt-Anchor" href="#匿名内部类"></a> 匿名内部类</h3>
<p><strong>格式：</strong></p>
<div class="rbcode">
<pre><code class="highlight java"><span class="keyword">new</span> 类或接口(构造参数...) &#123;
    类体(一般是方法重写);
&#125;</code></pre>
</div>
<p>匿名内部类是一个子类，并且会立即创建一个子类对象。</p>
<p>不能有任何构造参数，参数会直接传递给超类构造器。可以有初始化块。</p>
<p>匿名内部类在开发中通常直接作为参数传递给方法。</p>
<h2 id="枚举"><a class="markdownIt-Anchor" href="#枚举"></a> 枚举</h2>
<p><strong>语法格式</strong>：</p>
<div class="rbcode">
<pre><code class="highlight java">修饰符 <span class="keyword">enum</span> 枚举类名 &#123;
    名称<span class="number">1</span>, 名称<span class="number">2</span>, ...;
    其他成员...
&#125;</code></pre>
</div>
<ul>
<li>枚举类的第一行只能是一些名称，都是常量，表示枚举类对象</li>
<li>枚举类的构造器都是私有的</li>
<li>枚举都是最终类，不能被继承</li>
<li>枚举类继承 <code>java.lang.Enum</code> 类</li>
<li>在 <code>switch</code> 中使用枚举时<strong>不用</strong>枚举类前缀</li>
</ul>
<p>假设有 <code>public enum A</code>，常用方法：</p>
<ul>
<li><code>A[] values()</code>：拿到全部枚举对象</li>
<li><code>A valueOf(String name)</code>：根据名字获得枚举对象</li>
<li><code>String object.name()</code>：枚举对象名</li>
<li><code>int object.ordinal()</code>：枚举对象索引</li>
</ul>
<h3 id="抽象枚举"><a class="markdownIt-Anchor" href="#抽象枚举"></a> 抽象枚举</h3>
<details class="mkmt mt-code" open>
<summary>示例</summary>
<pre><code class="highlight java"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Color</span> &#123;
    R(<span class="string">&quot;Red&quot;</span>) &#123;
        <span class="meta">@Override</span>
        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dipict</span><span class="params">()</span> &#123;
            System.out.println(getName() + <span class="string">&quot;: #ff0000&quot;</span>);
        &#125;
    &#125;,
    G(<span class="string">&quot;Green&quot;</span>) &#123;
        <span class="meta">@Override</span>
        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dipict</span><span class="params">()</span> &#123;
            System.out.println(getName() + <span class="string">&quot;: #00ff00&quot;</span>);
        &#125;
    &#125;,
    B(<span class="string">&quot;Blue&quot;</span>) &#123;
        <span class="meta">@Override</span>
        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dipict</span><span class="params">()</span> &#123;
            System.out.println(getName() + <span class="string">&quot;: #0000ff&quot;</span>);
        &#125;
    &#125;;

    <span class="keyword">private</span> String name;

    Color(String name) &#123;
        <span class="built_in">this</span>.name = name;
    &#125;

    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">dipict</span><span class="params">()</span>;

    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;
        <span class="keyword">return</span> name;
    &#125;

    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;
        <span class="built_in">this</span>.name = name;
    &#125;
&#125;</code></pre>
</details>
<h2 id="泛型"><a class="markdownIt-Anchor" href="#泛型"></a> 泛型</h2>
<p><strong>泛型类：</strong></p>
<div class="rbcode">
<pre><code class="highlight java">修饰符 class 类名&lt;类型<span class="number">1</span>, 类型<span class="number">2</span>, ...&gt; &#123;
    ...
&#125;</code></pre>
</div>
<p><strong>泛型接口：</strong></p>
<div class="rbcode">
<pre><code class="highlight java">修饰符 interface 接口名&lt;类型<span class="number">1</span>, 类型<span class="number">2</span>, ...&gt; &#123;
    ...
&#125;</code></pre>
</div>
<p><strong>泛型方法</strong>：</p>
<div class="rbcode">
<pre><code class="highlight java">修饰符 &lt;类型<span class="number">1</span>, 类型<span class="number">2</span>, ...&gt; 返回值类型 方法名(形参列表) &#123;
    ...
&#125;</code></pre>
</div>
<p>显式指定类型参数： <code>&lt;类型1, 类型2, ...&gt;方法名(形参列表)</code>。</p>
<p><strong>类型变量限定：</strong></p>
<p>使用 <code>&lt;T extends ...&gt;</code> 限定类型变量，限定类型用 <code>&amp;</code> 分隔。</p>
<p>限定可以有多个接口，但只能有一个类，且必须是限定列表中的第一个。</p>
<p>类型擦除后，原始类型为第一个限定。为提高效率，应将标记接口（没有方法的接口）放在限定列表的末尾。</p>
<p><strong>通配符类型：</strong></p>
<ul>
<li>任意类型：<code>&lt;?&gt;</code></li>
<li>子类型限定：<code>&lt;? extends ...&gt;</code>
<ul>
<li>set 方法：只能传入子类型的子类型，范围不确定，无法使用</li>
<li>get 方法：返回值是 <code>?</code> 的子类型，可用 <code>?</code> 及其超类型接收</li>
</ul>
</li>
<li>超类型限定：<code>&lt;? super ...&gt;</code>
<ul>
<li>set 方法：可传递 <code>?</code> 超类型的子类型，故 <code>?</code> 的子类型一定能传递</li>
<li>get 方法：返回值是 <code>?</code> 的超类型，范围不确定，只能用 <code>Object</code> 接收</li>
</ul>
</li>
</ul>
<p><strong>泛型限制：</strong></p>
<p>大多数限制都是由类型擦除引起的。</p>
<ul>
<li>不能用基本类型作为类型参数</li>
<li><code>instanceof</code> 只检查原始类型是否匹配，对泛型类型使用可能得到编译错误或警告</li>
<li>不能创建参数化类型（<code>class&lt;T&gt;</code>）的数组</li>
<li>不能实例化类型变量（<code>new T()</code>）</li>
<li>不能构造泛型数组（<code>new T[n]</code>）</li>
<li>不能在静态方法或字段中使用类型变量</li>
</ul>
]]></content>
      <categories>
        <category>编程语言</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
</search>
